# STT-RS Configuration Example
# Copy this file to config.toml and modify as needed

[audio]
# Target sample rate (Hz) - 16000 is standard for STT
sample_rate = 16000
# Number of channels (1 = mono)
channels = 1
# Buffer size in samples
buffer_size = 512
# Audio device name (comment out to use default)
# device = "MacBook Pro Microphone"

[preprocessing]
# Enable resampling to target sample rate
enable_resampling = true
# Enable filtering for radio voice band
enable_filtering = true
# High-pass filter cutoff (Hz) - removes DC offset and rumble
high_pass_cutoff = 300.0
# Low-pass filter cutoff (Hz) - radio voice band limit
low_pass_cutoff = 3400.0
# Enable audio normalization (disabled if AGC is on)
enable_normalization = true

# Noise reduction (spectral subtraction approximation)
enable_noise_reduction = false
# Noise reduction strength (0.0 - 1.0, higher = more aggressive)
noise_reduction_strength = 0.5

# Automatic Gain Control
enable_agc = true
# AGC target level (0.0 - 1.0)
agc_target_level = 0.5
# AGC attack time (seconds) - how fast to reduce gain
agc_attack_time = 0.01
# AGC release time (seconds) - how fast to increase gain
agc_release_time = 0.1

# Voice Activity Detection
enable_vad = true
# VAD energy threshold (0.0 - 1.0)
vad_threshold = 0.01
# Minimum speech duration before triggering (seconds)
vad_min_speech_duration = 0.25
# Minimum silence duration before ending segment (seconds)
vad_min_silence_duration = 0.3
# Pre-roll audio to include before speech starts (seconds)
vad_pre_roll = 0.2
# Maximum segment duration before forced split (seconds)
vad_max_segment_duration = 10.0

[realtime]
# Target sample rate for Whisper (Hz)
target_sample_rate = 16000
# Enable graceful degradation when falling behind
enable_degradation = true
# Maximum processing lag before dropping segments (seconds)
max_lag_seconds = 5.0
# Minimum segment duration to process (seconds)
min_segment_seconds = 0.5

[stt]
# Path to Whisper model file
# Download with: stt-rs download-model -s base --english-only
# Or manually from: https://huggingface.co/ggerganov/whisper.cpp/tree/main
model_path = "./models/ggml-base.en.bin"
# Model size: tiny, base, small, medium, large
model_size = "base"
# Language for transcription
language = "en"
# Number of threads for inference
threads = 4
# Enable translation to English
translate = false

[output]
# Output format: text, json, srt, vtt
format = "text"
# Output file path (comment out for console only)
# output_path = "./transcriptions/output.txt"
# Include timestamps in output
enable_timestamps = true
# Enable console output
enable_console = true
